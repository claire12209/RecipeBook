<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Home</title>
    <link rel="stylesheet" type="text/css" href="/css/styles.css"/>
</head>
<body>
    <h2>Welcome to the Recipe Book</h2>
    <p>
        <a th:href="@{/login}">Login</a> | <a th:href="@{/register}">Register</a>
        | <a th:href="@{/profile}" class="btn btn-primary">Go to Profile</a>
    </p>

    <!-- Search Form -->
    <form th:action="@{/home}" method="get">
        <label for="search">Search Recipes:</label>
        <input type="text" id="search" name="query" placeholder="Search by name or ingredient"
               th:value="${query}">
        <button type="submit">Search</button>
    </form>

    <!-- Category Filter Form -->
    <form th:action="@{/home}" method="get">
        <label for="category">Filter by Category:</label>
        <select id="category" name="category">
            <!-- Dynamically populate categories -->
            <option th:each="category : ${categories}" 
                    th:value="${category.name}" 
                    th:text="${category.name}" 
                    th:selected="${category == category.name}"></option>
        </select>
        <button type="submit">Filter</button>
    </form>
    

    <h3>All Recipes</h3>
    <ul>
        <!-- Loop through the recipes and display their name and average rating -->
        <th:block th:each="recipe : ${recipes}">
            <li>
                <a th:href="@{/recipe/{id}(id=${recipe.id})}" th:text="${recipe.name}">Recipe Title (ID: ${recipe.id})</a>
                <!-- Display the average rating for the recipe -->
                <p>Average Rating: <span th:text="${recipe.averageRating}">0</span></p>
            </li>
        </th:block>
    </ul>
</body>
</html>
